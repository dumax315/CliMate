<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="./index.js"></script>
  <title>CliMate</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
  <link rel="stylesheet" href="./quizStyle.css">
  
</head>

<body>
<!--   here is the header with the -->
  <div class="header">
    <a href="./" class="logo">CliMate <img src="/images/logo.png"></a>
    
    <div class="header-right">
      <a href="./">Home</a>
      <a class="active" href="./Knowledge.html">Knowledge</a>
      <a href="./Action.html">Action</a>
      <span id="notSignedin">
        <a href="./signup.html">Sign up</a>
        <a href="./login.html">Log in</a> 
      </span>
      <div id="signedin">Loged In As: <span id="accountEmail"></span>
      <button id='logout-button'>Logout</button></div>
    </div>
    
  </div>

    <div id="quiz">
        <div id="question"></div>
        <button class="option" id="option0" onclick="processResponse('a')"></button>
        <button class="option" id="option1" onclick="processResponse('b')"></button>
        <button class="option" id="option2" onclick="processResponse('c')"></button>
        <button class="option" id="option3" onclick="processResponse('d')"></button>
        <div id="feedback"></div>
        <div id="next"></div>
    </div>

    <div class="footerMarginCorrect">
    </div>
    <footer>
      <img src="images/lizard.png">
      <h2 id="notSignedinPoints">
        Log in to start earning points
      </h2>
      <h2 id="signedinPoints">
        Points: <span id="points"></span>
      </h2>
    </footer>

    <script>
        let pointTracker = 0;
        let quizPoints = 1;
        let numCorrect = 0;
        let index = 0;

        let factBank = [
            {
                title: "Greenhouse Gases",
                body: "Greenhouse gases are gases the trap heat in the atmosphere. " +
                    "When these gases are released, they remain in the atmosphere for a very " +
                    "long time - from decades to hundreds of years."+
                    "They can be removed from the atmosphere over time by things like oceans and plant life.\n" +
                    "Because of human intervention, however, greenhouse gases are entering the atmosphere" +
                    "far quicker then they can be removed. Things like cars and energy production" +
                    "have massively increased the amount of gases we emit and the destruction of forests means" +
                    "that there is less plant life to remove these gases from the atmosphere.\n" +
                    "This is bad for us because as global temperatures rise, extreme weather events like" +
                    "like tropical storms, wildfires, droughts, and heat waves become more common."
            },
            {
                title: "Fossil Fuels",
                body: 'When fossil fuels are burned, they release large amounts of carbon dioxide (CO2) into the atmosphere. ' +
                    'CO2 is the the number one greenhouse gas generated by humans.' +
                    'Since 1970, the amount of CO2 emitted globally has increased by 90%! ' +
                    'We burn fossil fuels to produce things like heat and electricity, ' +
                    'but these things can also be generated by renewable energy sources like wind or the sun (solar energy).' +
                    'In the US, 60% of electricity is generated by fossil fuels while only 20% from renewable sources'
            }
        ]

        let energyQuiz = [
            {
                question: "Which of the following is a renewable resource?",
                options: {
                    a: 'oil',
                    b: 'wind',
                    c: 'coal',
                    d: 'nuclear energy'
                },
                answer: 'b',
                correctMessage: 'Good job! Coal and oil are non-renewable resources that contribute to greenhouse gas emissions. ' +
                    'In order to combat climate change, we need to transition to using renewable resources ' +
                    'like wind and solar energy.',
                wrongMessage: 'Sorry! Coal and oil are non-renewable resources that contribute to greenhouse gas emissions. ' +
                    'In order to combat climate change, we need to completely transition to using renewable resources ' +
                    'like wind and solar energy.'
            },
            {
                question: "Which fossil fuel emits the most CO2 emissions?",
                options: {
                    a: 'coal',
                    b: 'oil',
                    c: 'gas',
                    d: 'petroleum'
                },
                answer: 'a',
                correctMessage: 'Correct! All of these fossil fuels contribute to the destruction of our planet ' +
                    'but coal tops the list.',
                wrongMessage: 'Sorry! All of these fossil fuels contribute to the destruction of our planet ' +
                    'but coal tops the list.'
            }
        ];

        generateQuiz(energyQuiz);

        function processResponse(userResponse){
            // if answer is correct
            if(userResponse === energyQuiz[index].answer){
                pointTracker += quizPoints;
                addUserPointsButton(quizPoints*90)
                // updateUserPointsManual(quizPoints*90)

                document.querySelector('#feedback').innerText = energyQuiz[index].correctMessage;
                numCorrect++;
            }

            // if the answer is wrong
            else
                document.querySelector('#feedback').innerText = energyQuiz[index].wrongMessage;

            document.querySelector('#next').innerHTML = '<button id="nextButton" onclick="increment()">Continue</button>';

        }

        function increment(){
            index++;
            document.querySelector('#feedback').innerText = '';
            document.querySelector('#next').innerHTML = '';
            generateQuiz(energyQuiz);
        }

        function generateQuiz(quiz){
            if(index < quiz.length ){
                console.log(quiz[index.length]);
                document.querySelector('#question').innerText = quiz[index].question;
                let i = 0;
                for(let letter in quiz[index].options){
                    // change button text
                    document.querySelector('#option' + i).innerText = quiz[index].options[letter];
                    i++;
                }
            }
            else
                document.querySelector('#quiz').innerText = numCorrect + ' out of ' + quiz.length + ' correct';
        }

    </script>

</body>
</html>